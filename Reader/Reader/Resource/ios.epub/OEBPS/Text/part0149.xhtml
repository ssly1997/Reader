<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
  <h2 class="calibre9">16.4 固有内容大小</h2>

  <p class="calibre1">　　固有内容大小的含义：视图要显示的实际内容区域大小。例如，<span class="calibre10">UILabel</span>的固有内容大小是由需要显示的文字数量决定的。而<span class="calibre10">UIImageView</span>的固有内容大小则是所显示图片的尺寸。</p>

  <p class="calibre1">　　自动布局系统会根据固有内容大小为视图添加相应的约束，与其他约束不同，这类约束有两个优先级属性，分别是内容放大优先级（content hugging priority）和内容缩小优先级（content compression resistance priority）。</p>

  <p class="calibre1">　　优先级属性在水平方向和垂直方向可以有不同的数值。因此，可以为视图的宽和高设置不同的优先级，每个视图都有四个优先级数值。</p>

  <p class="calibre1">　　首先介绍如何在Interface Builder中查看并修改这些优先级。重新打开BNRDetailView- Controller.xib，按住Shift，在画布中同时选中三个UITextField对象。然后点击图标，打开大小检视面板（size inspector），找到Content Hugging Priority和Content Compression Resistance Priority部分（见图16-3）。</p>

  <p class="calibre7"><img alt="tu16-3" src="../Images/image00591.jpeg" class="calibre8"/></p>

  <p class="calibre7">图16-3 在Interface Builder中查看优先级</p>

  <p class="calibre1">　　可以看见，目前这些优先级的数值并不是1000，其中Content Hugging Priority的Vertical是250，而imageView的是251。因此，如果用户选择了一张小尺寸图片，自动布局系统会增加<span class="calibre10">UITextField</span>对象的高度，使高度超出<span class="calibre10">UITextField</span>对象的固有内容大小。为了解决该问题，需要将imageView垂直方向的优先级设置为比其他视图低的数值。</p>

  <p class="calibre1">　　下面介绍如何通过代码修改视图的优先级属性。打开BNRDetailViewController.m，修改<span class="calibre10">viewDidLoad</span>方法，降低imageView垂直方向的优先级，代码如下：</p>

  <p class="calibre1">　　- （void）viewDidLoad</p>

  <p class="calibre1">　　{</p>

  <p class="calibre1">　　[super viewDidLoad];</p>

  <p class="calibre1">　　UIImageView *iv = [[UIImageView alloc] initWithImage:nil];</p>

  <p class="calibre1">　　// 设置UIImageView对象的内容缩放模式</p>

  <p class="calibre1">　　iv.contentMode = UIViewContentModeScaleAspectFit;</p>

  <p class="calibre1">　　// 告诉自动布局系统不要将自动缩放掩码转换为约束</p>

  <p class="calibre1">　　iv.translatesAutoresizingMaskIntoConstraints = NO;</p>

  <p class="calibre1">　　// 将UIImageView对象添加到view上</p>

  <p class="calibre1">　　[self.view addSubview:iv];</p>

  <p class="calibre1">　　// 将UIImageView对象赋给imageView属性</p>

  <p class="calibre1">　　self.imageView = iv;</p>

  <p class="calibre1"><span class="calibre10">　　// 将imageView垂直方向的优先级设置为比其他视图低的数值</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[self.imageView setContentHuggingPriority:200</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　forAxis:UILayoutConstraintAxisVertical];</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[self.imageView setContentCompressionResistancePriority:700</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　forAxis:UILayoutConstraintAxisVertical];</span><br class="calibre2"/></p>

  <p class="calibre1">　　}</p>

  <p class="calibre1">　　构建并运行应用，选择一张小尺寸图片，这次自动布局系统不会再修改UITextField对象的高度。</p>

  <p class="calibre1"><br class="calibre2"/></p>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre6">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre6">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
