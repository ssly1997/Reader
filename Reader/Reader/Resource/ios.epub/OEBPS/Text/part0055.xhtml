<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
  <h2 class="calibre9">6.5 添加本地通知</h2>

  <p class="calibre1">　　接下来使用本地通知（local notification）实现催眠提醒功能。本地通知用于向用户提示一条消息——即使应用没有运行，用户也可以收到本地通知。</p>

  <p class="calibre1">　　应用还可以通过后台服务器实现推送通知（push notification）。有关推送通知的技术细节请参考Apple的Local and Push Notification Programming Guide（本地通知和推送通知编程指南）。</p>

  <p class="calibre1">　　实现本地通知非常简单，首先需要创建一个UILocalNotification对象并设置其显示内容和提醒时间，然后调用UIApplication单例对象的scheduleLocalNotification:方法注册该通知就可以了。</p>

  <p class="calibre1">　　实现addReminder:方法，代码如下：</p>

  <p class="calibre1">　　- (IBAction)addReminder:(id)sender</p>

  <p class="calibre1">　　{</p>

  <p class="calibre1">　　NSDate *date = self.datePicker.date;</p>

  <p class="calibre1">　　NSLog(@"Setting a reminder for %@", date); </p>

  <p class="calibre1"><span class="calibre10">　　UILocalNotification *note = [[UILocalNotification alloc] init];</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　note.alertBody = @"Hypnotize me!";</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　note.fireDate = date;</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[[UIApplication sharedApplication] scheduleLocalNotification:note];</span><br class="calibre2"/></p>

  <p class="calibre1">　　}</p>

  <p class="calibre1">　　构建并运行应用，首先选中Reminder标签项；然后选择一个距离现在较近的提醒时间，以便更快收到催眠提醒；最后点击Remind Me按钮。为了看到本地通知，必须关闭HypnoNerd应用，请点击设备底部的Home键或者选择模拟器菜单Hardware→Home（硬件→首页）。当之前选择的提醒时间到了之后，屏幕顶部会出现一个通知栏（见图6-18），点击通知栏就可以启动HypnoNerd应用。</p>

  <p class="calibre7"><img alt="tu6-18" src="../Images/image00460.jpeg" class="calibre8"/></p>

  <p class="calibre7">图6-18 本地通知</p>

  <p class="calibre1">　　可能读者已经注意到了一个问题：用户可以选择一个过去的时间。之后的章节会设置datePicker，只允许用户选择未来的时间。</p>

  <p class="calibre1"><br class="calibre2"/></p>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre6">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre6">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
