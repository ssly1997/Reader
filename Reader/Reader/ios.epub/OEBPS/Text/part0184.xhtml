<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
  <h2 class="calibre9">20.2 响应用户首选字体的改变</h2>

  <p class="calibre1">　　用户修改了首选字体大小后，应用会收到UIContentSizeCategoryDidChangeNotification通知，可以注册该通知响应用户首选字体的改变，例如更新界面中文本控件的字体。</p>

  <p class="calibre1">　　打开BNRDetailViewController.m，在initForNewItem:中将BNRDetailViewController对象注册为UIContentSizeCategoryDidChangeNotification的观察者，然后在dealloc中移除观察者，代码如下：</p>

  <p class="calibre1">　　self.navigationItem.leftBarButtonItem = cancelItem;</p>

  <p class="calibre1">　　}</p>

  <p class="calibre1"><span class="calibre10">　　// 注意不要将注册通知的代码写在if （isNew） {}中</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　NSNotificationCenter *defaultCenter =</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[NSNotificationCenter defaultCenter];</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[defaultCenter addObserver:self</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　selector:@selector（updateFonts）</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　name:UIContentSizeCategoryDidChangeNotification</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　object:nil];</span><br class="calibre2"/></p>

  <p class="calibre1">　　}</p>

  <p class="calibre1">　　return self;</p>

  <p class="calibre1">　　}</p>

  <p class="calibre1"><span class="calibre10">　　- （void）dealloc</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　{</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　NSNotificationCenter *defaultCenter =</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[NSNotificationCenter defaultCenter];</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　[defaultCenter removeObserver:self];</span><br class="calibre2"/></p>

  <p class="calibre1"><span class="calibre10">　　}</span><br class="calibre2"/></p>

  <p class="calibre1">　　注意，用于响应UIContentSizeCategoryDidChangeNotification的方法是之前实现的updateFonts，viewWillAppear:中也会调用该方法。再次构建并运行应用，首先在设置应用中修改首选字体大小，然后返回应用，这次所有文本控件都会根据用户首选字体调整文字大小。</p>

  <p class="calibre1">　　因为现在文本控件的文字大小会动态变化，所以下一节将调整文本控件的约束，支持动态字体。</p>

  <p class="calibre1"><br class="calibre2"/></p>
<div class="calibre5">本书由「<a href="https://epubw.com" class="calibre6">ePUBw.COM</a>」整理，<a href="https://epubw.com" class="calibre6">ePUBw.COM</a> 提供最新最全的优质电子书下载！！！</div></body></html>
